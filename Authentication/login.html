<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Silicon Residence - Login</title>
  <link rel="stylesheet" href="../Bootstrap/css/bootstrap.min.css" />
  <script src="../Bootstrap/js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
  <!-- <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet"> -->
  <link rel="stylesheet" href="./login.css">
  <!-- <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap"> -->
  
</head>

<body>
  <div class="header-bar">
    <img src="../images/hms logo.jpeg" alt="Logo" width="80px" class="logo" />
    <h2 >Silicon Residence</h2>
  </div>

  <div class="container">
    <div class="row justify-content-center align-items-center w-100 g-2">
      <!-- Login Section -->
      <div class="col-md-5">
        <div class="login-box animate__animated animate__fadeInUp">
          <div class="login-title">Login</div>
          <form id="loginForm">
            <div class="mb-3">
              <label class="form-label fw-bold text-light">USER NAME</label>
              <input type="text" class="form-control" id="userId" style="height: 45px;" />
              <span id="userIdError" class="text-danger"></span>
            </div>
            <div class="mb-3">
              <label class="form-label fw-bold text-light">PASSWORD</label>
              <input type="password" class="form-control" id="password" style="height: 45px;" />
              <span id="passwordError" class="text-danger"></span>
            </div>
            <input type="submit" class="btn-signin mt-3 fw-bold" value="Sign In" />
          </form>
        </div>
      </div>

      <!-- Carousel Section -->
      <div class="col-md-7">
        <div class="carousel-container">
          <div id="carouselExample" class="carousel slide w-100 h-100">
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img src="../images/hostel1.jpeg" class="d-block w-100" alt="Image 1" />
              </div>
              <div class="carousel-item">
                <img src="../images/hostel2.jpeg" class="d-block w-100" alt="Image 2" />
              </div>
              <div class="carousel-item">
                <img src="../images/hostel3.jpeg" class="d-block w-100" alt="Image 3" />
              </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="../Jquery/jquery-3.7.1.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
  const items = document.querySelectorAll(".carousel-item");
  let currentIndex = 0;

  function showSlide(index) {
    items.forEach((item) => {
      item.classList.remove("active");
      item.style.opacity = "0";
      item.style.display = "none";
      item.style.animation = "none"; // Reset previous animation
    });

    const currentItem = items[index];
    currentItem.classList.add("active");
    currentItem.style.display = "block";

    // Use requestAnimationFrame to ensure animation plays smoothly
    requestAnimationFrame(() => {
      currentItem.style.opacity = "1";
      if (index === 0) {
        currentItem.style.animation = "fadeZoomIn 3s ease-in-out";
      } else if (index === 1) {
        currentItem.style.animation = "dottedEffect 3s ease-in-out";
      } else if (index === 2) {
        currentItem.style.animation = "cornerIn 3s ease-in-out";
      }
    });
  }

  function nextSlide() {
    currentIndex = (currentIndex + 1) % items.length;
    showSlide(currentIndex);
  }

  function prevSlide() {
    currentIndex = (currentIndex - 1 + items.length) % items.length;
    showSlide(currentIndex);
  }

  // Auto-slide every 6 seconds
  setInterval(nextSlide, 6000);

  // Add event listeners for next/prev buttons
  const nextBtn = document.querySelector(".carousel-control-next");
  const prevBtn = document.querySelector(".carousel-control-prev");

  if (nextBtn) {
    nextBtn.addEventListener("click", nextSlide);
  }

  if (prevBtn) {
    prevBtn.addEventListener("click", prevSlide);
  }

  // Initial display
  showSlide(currentIndex);
});

    document.getElementById("loginForm").addEventListener("submit", function (event) {
      event.preventDefault();
      let isValid = true;

      let userId = document.getElementById("userId").value.trim();
      let password = document.getElementById("password").value.trim();
      let userIdPattern = /^[0-9]{2}[a-zA-Z]{4}[0-9]{2}$/;

      document.getElementById("userIdError").innerText = "";
      document.getElementById("passwordError").innerText = "";

      if (userId === "") {
        document.getElementById("userIdError").innerText = "User ID cannot be empty.";
        isValid = false;
      } else if (userId !== "admin@silicon.ac.in" && !userId.match(userIdPattern)) {
        document.getElementById("userIdError").innerText = "Invalid User ID";
        isValid = false;
      }

      if (password === "") {
        document.getElementById("passwordError").innerText = "Password cannot be empty.";
        isValid = false;
      }

      if (isValid) {
        $.ajax({
          url: "login.php",
          method: "POST",
          data: { 'userId': userId, 'password': password },
          success: function (data) {
            console.log(data);
            if (data === "Admin True Data") {
              window.location = "../Admin/admin_dashboard.php";
            }
            //  else if (data === "Admin False Data") {
            // }
            else if(data === "Student True Data"){
              window.location = "../Student/student_dashboard.php";
            }else{
              
              document.getElementById("passwordError").innerText = "UserId/Password incorrect Try Again!";
              document.getElementById("passwordError").style.color = "red";
            }
          }
        });
      }
    });
  </script>
</body>
</html>
